/**
 * Copyright (c) Tiny Technologies, Inc. All rights reserved.
 * Licensed under the LGPL or a commercial license.
 * For LGPL see License.txt in the project root for license information.
 * For commercial licenses see https://www.tiny.cloud/
 *
 * Version: 5.6.2 (2020-12-08)
 */(function(){function ka(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return function(){for(var d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];d=b.concat(d);return a.apply(null,d)}}var E=function(a){var b=a;return{get:function(){return b},set:function(c){b=c}}},la=tinymce.util.Tools.resolve("tinymce.PluginManager"),Q=function(a){return{isFullscreen:function(){return null!==a.get()}}},A=function(){},ma=function(a,b){return function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return a(b.apply(null,c))}},na=function(a,b){return function(c){return a(b(c))}},r=function(a){return function(){return a}},t=r(!1),B=r(!0),C=function(){return F},F=function(){var a=function(d){return d.isNone()},b=function(d){return d()},c=function(d){return d};return{fold:function(d,e){return d()},is:t,isSome:t,isNone:B,getOr:c,getOrThunk:b,getOrDie:function(d){throw Error(d||"error: getOrDie called on none.");},getOrNull:r(null),getOrUndefined:r(void 0),or:c,orThunk:b,map:C,each:A,bind:C,exists:t,forall:B,filter:C,equals:a,equals_:a,toArray:function(){return[]},toString:r("none()")}}(),G=function(a){var b=r(a),c=function(){return e},d=function(f){return f(a)},e={fold:function(f,g){return g(a)},is:function(f){return a===f},isSome:B,isNone:t,getOr:b,getOrThunk:b,getOrDie:b,getOrNull:b,getOrUndefined:b,or:c,orThunk:c,map:function(f){return G(f(a))},each:function(f){f(a)},bind:d,exists:d,forall:d,filter:function(f){return f(a)?e:F},toArray:function(){return[a]},toString:function(){return"some("+a+")"},equals:function(f){return f.is(a)},equals_:function(f,g){return f.fold(t,function(h){return g(a,h)})}};return e},k={some:G,none:C,from:function(a){return null===a||void 0===a?F:G(a)}},oa=function(a){var b=E(k.none());return{clear:function(){b.get().each(a);b.set(k.none())},isSet:function(){return b.get().isSome()},set:function(c){b.get().each(a);b.set(k.some(c))}}},R=function(){return oa(function(a){return a.unbind()})},pa=function(){var a=E(k.none());return{clear:function(){return a.set(k.none())},set:function(b){return a.set(k.some(b))},isSet:function(){return a.get().isSome()},on:function(b){return a.get().each(b)}}},m=function(a){return function(b){var c=typeof b;return(null===b?"null":"object"===c&&(Array.prototype.isPrototypeOf(b)||b.constructor&&"Array"===b.constructor.name)?"array":"object"===c&&(String.prototype.isPrototypeOf(b)||b.constructor&&"String"===b.constructor.name)?"string":c)===a}},u=function(a){return function(b){return typeof b===a}},S=m("string"),qa=m("array"),ra=u("boolean"),T=function(a){return null===a||void 0===a},x=u("function"),sa=u("number"),ta=Array.prototype.push,H=function(a,b){for(var c=a.length,d=Array(c),e=0;e<c;e++)d[e]=b(a[e],e);return d},I=function(a,b){for(var c=0,d=a.length;c<d;c++)b(a[c],c)},J=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++){var f=a[d];b(f,d)&&c.push(f)}return c},ua=function(a){for(var b=[],c=0,d=a.length;c<d;++c){if(!qa(a[c]))throw Error("Arr.flatten item "+c+" was not an array, input: "+a);ta.apply(b,a[c])}return b},va=Object.keys,wa=function(a,b){for(var c=va(a),d=0,e=c.length;d<e;d++){var f=c[d];b(a[f],f)}},y=function(a){if(null===a||void 0===a)throw Error("Node cannot be null or undefined");return{dom:a}},l={fromHtml:function(a,b){b=(b||document).createElement("div");b.innerHTML=a;if(!b.hasChildNodes()||1<b.childNodes.length)throw console.error("HTML does not have a single root node",a),Error("HTML must have a single root node");return y(b.childNodes[0])},fromTag:function(a,b){a=(b||document).createElement(a);return y(a)},fromText:function(a,b){a=(b||document).createTextNode(a);return y(a)},fromDom:y,fromPoint:function(a,b,c){return k.from(a.dom.elementFromPoint(b,c)).map(y)}};"undefined"!==typeof window||Function("return this;")();m=function(a){return function(b){return b.dom.nodeType===a}};var xa=m(1),ya=m(3),za=m(9),Aa=m(11),U=function(a,b){a=a.dom;if(1!==a.nodeType)return!1;if(void 0!==a.matches)return a.matches(b);if(void 0!==a.msMatchesSelector)return a.msMatchesSelector(b);if(void 0!==a.webkitMatchesSelector)return a.webkitMatchesSelector(b);if(void 0!==a.mozMatchesSelector)return a.mozMatchesSelector(b);throw Error("Browser lacks native selectors");},Ba=function(a,b){b=void 0===b?document:b.dom;return 1!==b.nodeType&&9!==b.nodeType&&11!==b.nodeType||0===b.childElementCount?[]:H(b.querySelectorAll(a),l.fromDom)},v=function(a){return l.fromDom(a.dom.ownerDocument)};m=function(a){return za(a)?a:v(a)};var Da=function(a){return k.from(a.dom.parentNode).map(l.fromDom).map(Ca).map(function(b){return J(b,function(c){return a.dom!==c.dom})}).getOr([])},Ca=function(a){return H(a.dom.childNodes,l.fromDom)};u=x(Element.prototype.attachShadow)&&x(Node.prototype.getRootNode);var Ea=r(u),Fa=u?function(a){return l.fromDom(a.dom.getRootNode())}:m,K=function(a){a=Fa(a);return Aa(a)?k.some(a):k.none()},L=function(a){return l.fromDom(a.dom.host)},Ga=function(a){if(Ea()&&!T(a.target)){var b=l.fromDom(a.target);if(xa(b)&&!T(b.dom.shadowRoot)&&a.composed&&a.composedPath&&(b=a.composedPath()))return 0<b.length?k.some(b[0]):k.none()}return k.from(a.target)},V=function(a){var b=ya(a)?a.dom.parentNode:a.dom;if(void 0===b||null===b||null===b.ownerDocument)return!1;var c=b.ownerDocument;return K(l.fromDom(b)).fold(function(){return c.body.contains(b)},na(V,L))},W=function(a,b){a=a.dom.getAttribute(b);return null===a?void 0:a},M=function(a,b){var c=a.dom;wa(b,function(d,e){if(!S(d))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",d,":: Element ",c),Error("CSS value must be a string: "+d);void 0!==c.style&&x(c.style.getPropertyValue)&&c.style.setProperty(e,d)})},X=function(a){var b=l.fromDom(Ga(a).getOr(a.target)),c=function(){return a.stopPropagation()},d=function(){return a.preventDefault()},e=ma(d,c);return{target:b,x:a.clientX,y:a.clientY,stop:c,prevent:d,kill:e,raw:a}},Ha=function(a,b){return function(c){a(c)&&b(X(c))}},Ia=function(a,b,c,d){a.dom.removeEventListener(b,c,d)},Ja=function(a,b,c){c=Ha(B,c);a.dom.addEventListener(b,c,!1);return{unbind:ka(Ia,a,b,c,!1)}},Y=function(a,b){return{left:a,top:b,translate:function(c,d){return Y(a+c,b+d)}}},Ka=Y,La=function(a){a=void 0!==a?a.dom:document;return Ka(a.body.scrollLeft||a.documentElement.scrollLeft,a.body.scrollTop||a.documentElement.scrollTop)},N=function(a){return k.from((void 0===a?window:a).visualViewport)},Z=function(a,b,c,d){return{x:a,y:b,width:c,height:d,right:a+c,bottom:b+d}},Ma=function(a){var b=void 0===a?window:a,c=La(l.fromDom(b.document));return N(b).fold(function(){var d=b.document.documentElement;return Z(c.left,c.top,d.clientWidth,d.clientHeight)},function(d){return Z(Math.max(d.pageLeft,c.left),Math.max(d.pageTop,c.top),d.width,d.height)})},aa=function(a,b,c){return N(c).map(function(d){var e=function(f){return b(X(f))};d.addEventListener(a,e);return{unbind:function(){return d.removeEventListener(a,e)}}}).getOrThunk(function(){return{unbind:A}})};m=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");var ba=tinymce.util.Tools.resolve("tinymce.Env"),Na=tinymce.util.Tools.resolve("tinymce.util.Delay"),ca=function(a,b){a.fire("FullscreenStateChanged",{state:b})},O=function(a){return a.getParam("fullscreen_native",!1,"boolean")},Oa=function(a){var b=l.fromDom(a.getElement());return K(b).map(L).getOrThunk(function(){var c=v(b).dom.body;if(null===c||void 0===c)throw Error("Body is not available yet");return l.fromDom(c)})},da=function(a){return void 0!==a.fullscreenElement?a.fullscreenElement:void 0!==a.msFullscreenElement?a.msFullscreenElement:void 0!==a.webkitFullscreenElement?a.webkitFullscreenElement:null},Pa=function(a){a=a.dom;a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.webkitRequestFullScreen&&a.webkitRequestFullScreen()},Qa=function(a){a=a.dom;a.exitFullscreen?a.exitFullscreen():a.msExitFullscreen?a.msExitFullscreen():a.webkitCancelFullScreen&&a.webkitCancelFullScreen()},Ra=function(a,b,c){c=x(c)?c:t;var d=a.dom;for(a=[];null!==d.parentNode&&void 0!==d.parentNode;){d=d.parentNode;var e=l.fromDom(d);a.push(e);if(!0===c(e))break}return J(a,b)},Sa=function(a,b){return J(Da(a),b)},Ta=function(a,b,c){return Ra(a,function(d){return U(d,b)},c)},Ua=function(a,b){return Sa(a,function(c){return U(c,b)})},Va=ba.os.isAndroid(),Wa=function(a){var b=a.dom,c=window.getComputedStyle(b).getPropertyValue("background-color");a=""!==c||V(a)?c:void 0!==b.style&&x(b.style.getPropertyValue)?b.style.getPropertyValue("background-color"):"";return void 0!==a&&""!==a?"background-color:"+a+"!important":"background-color:rgb(255,255,255)!important;"},Xa=function(a,b,c){var d=function(g){return function(h){var n=W(h,"style");n=void 0===n?"no-styles":n.trim();if(n!==g){var z=h.dom;if(S(n)||ra(n)||sa(n))z.setAttribute("data-ephox-mobile-fullscreen-style",n+"");else throw console.error("Invalid call to Attribute.set. Key ","data-ephox-mobile-fullscreen-style",":: Value ",n,":: Element ",z),Error("Attribute value was not simple");M(h,a.parseStyle(g))}}},e=Ta(b,"*"),f=ua(H(e,function(g){return Ua(g,"*:not(.tox-silver-sink)")}));c=Wa(c);I(f,d("display:none!important;"));I(e,d("position:absolute!important;top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;"+c));d((!0===Va?"":"position:absolute!important;")+"top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;"+c)(b)},Ya=function(a){var b=Ba("[data-ephox-mobile-fullscreen-style]");I(b,function(c){var d=W(c,"data-ephox-mobile-fullscreen-style");"no-styles"!==d?M(c,a.parseStyle(d)):c.dom.removeAttribute("style");c.dom.removeAttribute("data-ephox-mobile-fullscreen-style")})},ea=m.DOM,Za=function(){var a=Ma(window);return{x:a.x,y:a.y}},$a=function(a){window.scrollTo(a.x,a.y)},fa=N().fold(function(){return{bind:A,unbind:A}},function(a){var b=pa(),c=R(),d=R(),e=function(){window.requestAnimationFrame(function(){b.on(function(g){return M(g,{top:"50px",left:"60px",height:(a.height-50)+"px",width:(a.width-60)+"px"})})})},f=Na.throttle(function(){document.body.scrollTop=0;document.documentElement.scrollTop=0;e()},50);return{bind:function(g){b.set(g);f();c.set(aa("resize",f));d.set(aa("scroll",f))},unbind:function(){b.on(function(){c.clear();d.clear()});b.clear()}}}),ia=function(a,b){layui.admin.sideFlexible(null);var c=document.body,d=document.documentElement,e=a.getContainer(),f=l.fromDom(e),g=Oa(a),h=b.get(),n=l.fromDom(a.getBody()),z=ba.deviceType.isTouch(),p=e.style,w=a.iframeElement.style,ha=function(q){q(c,"tox-fullscreen");q(d,"tox-fullscreen");q(e,"tox-fullscreen");K(f).map(function(D){return L(D).dom}).each(function(D){q(D,"tox-fullscreen");q(D,"tox-shadowhost")})},P=function(){z&&Ya(a.dom);ha(ea.removeClass);fa.unbind();k.from(b.get()).each(function(q){return q.fullscreenChangeHandler.unbind()})};h?(layui.admin.sideFlexible("spread"),h.fullscreenChangeHandler.unbind(),O(a)&&g.dom===da(v(g).dom)&&Qa(v(g)),w.width=h.iframeWidth,w.height=h.iframeHeight,p.width=h.containerWidth,p.height=h.containerHeight,p.top=h.containerTop,p.left=h.containerLeft,$a(h.scrollPos),b.set(null),ca(a,!1),P(),a.off("remove",P)):(h=Ja(v(g),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",function(q){O(a)&&g.dom!==da(v(g).dom)&&null!==b.get()&&ia(a,b)}),h={scrollPos:Za(),containerWidth:p.width,containerHeight:p.height,containerTop:p.top,containerLeft:p.left,iframeWidth:w.width,iframeHeight:w.height,fullscreenChangeHandler:h},z&&Xa(a.dom,f,n),w.width=w.height="100%",p.width=p.height="",ha(ea.addClass),fa.bind(f),a.on("remove",P),b.set(h),O(a)&&Pa(g),ca(a,!0))},ab=function(a,b){a.addCommand("mceFullScreen",function(){ia(a,b)})},ja=function(a,b){return function(c){c.setActive(null!==b.get());var d=function(e){return c.setActive(e.state)};a.on("FullscreenStateChanged",d);return function(){return a.off("FullscreenStateChanged",d)}}},bb=function(a,b){a.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return a.execCommand("mceFullScreen")},onSetup:ja(a,b)});a.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return a.execCommand("mceFullScreen")},onSetup:ja(a,b)})};(function(){la.add("fullscreen",function(a){var b=E(null);if(a.inline)return Q(b);ab(a,b);bb(a,b);a.addShortcut("Meta+Shift+F","","mceFullScreen");return Q(b)})})()})();